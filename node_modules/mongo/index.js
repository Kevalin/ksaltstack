var mongoose = require('mongoose');
var uri = 'mongodb://127.0.0.1:27017/ksaltstack';
var Schema = mongoose.Schema;

var userSchema = new Schema({
    user: {type: String},
    password: {type: String},
    token: {type: String},
    start: {type: Date},
    expire: {type: Date},
    eauth: {type: String},
    perms: {type: Array}
});

var serverSchema = new Schema({
    hostname: {type: String},
    ipv4: {type: Array},
    ip_interfaces: {type: Object},
    os: {tpye: String}
});

var action = {
    conn: function() {
        mongoose.connect(uri)
    },
    userModel: function() {
        return mongoose.model('users', userSchema, 'users')
    },
    serverModel: function() {
        return mongoose.model('servers', serverSchema, 'servers')
    }
};

module.exports = action;